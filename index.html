<!DOCTYPE html>
<html>
<head>
    <title>RoutineHub Direct Download</title>
    <script>
        const shortcutId = window.location.hash.substring(1);

        fetch(`https://routinehub.co/api/v1/shortcuts/${shortcutId}/versions/latest`)
            .then(response => {
                if (!response.ok) throw new Error('Shortcut not found');
                return response.json();
            })
            .then(data => {
                const url = `https://routinehub.co/download/${data.id}`;
                window.location.href = url;
                document.getElementById('fallbackLink').href = url;
                window.close();
            })
            .catch(err => {
                document.getElementById('fallbackLink').textContent = "Shortcut not found";
            });
    </script>
</head>
<style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
</style>
<body>
    <center>
    <h1 style="padding-top:50px;">Redirecting to download...</h1>
    <p>If the download doesn't start, 
       <a id="fallbackLink" href="#">click here</a>.
    </p>
    </center>
</body>
</html>